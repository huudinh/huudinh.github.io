<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SCI FRAMEWORK</title>
    <meta name="Resource-type" content="Document" />
    <meta name="viewport" content="initial-scale=1, width=device-width, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <link id="pagestyle" rel="stylesheet" type="text/css" href="assets/sass/lib.min.css" />
    <link id="pagestyle" rel="stylesheet" type="text/css" href="assets/sass/intro.min.css" />
    <script type="text/javascript" src="assets/js/lib.min.js"></script>
</head>

<body>
    <div class="header"></div>
    <div class="sidebar">
        <div class="sidebarBox sidebar-left"></div>
        <div class="main">
            <div id="mainLoad">
                <div class="container">
                    <h1>Lazyload</h1>
                    <h3>I. Lazy Images V2</h3>
                    <p>Demo lazyload sử dụng Intersection Observer API</p>
                    <p>2. src -> data-src</p>
                    <style>
                        img {
                          display: block;
                          max-width: 100%;
                          margin: 10px auto;
                          border: 0;
                        }
                    
                        .lazybg {
                          width: 753px;
                          height: 500px;
                          margin: 10px auto;
                          background-size: cover;
                          background-position: center;
                        }
                    </style>
                    <h3>II. Lazy Picture</h3>
                    <img data-src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=753&q=80" width="753" height="500" lazy>
                    <img data-src="https://images.unsplash.com/photo-1519046904884-53103b34b206?w=753&q=80" width="753" height="500" lazy>
                    <img data-src="https://images.unsplash.com/photo-1495954484750-af469f2f9be5?w=753&q=80" width="753" height="500" lazy>
                    <img data-src="https://images.unsplash.com/photo-1587502536900-baf0c55a3f74?w=753&q=80" width="753" height="500" lazy>
                    <img data-src="https://images.unsplash.com/photo-1510414842594-a61c69b5ae57?w=753&q=80" width="753" height="500" lazy>
                    <img data-src="https://images.unsplash.com/photo-1471922694854-ff1b63b20054?w=753&q=80" width="753" height="500" lazy>

                    <h3>III. Lazy Background</h3>
                    <div data-src="https://images.unsplash.com/photo-1473186578172-c141e6798cf4?w=753&q=80" class="lazybg" lazy></div>
                    <div data-src="https://images.unsplash.com/photo-1487349384428-12b47aca925e?w=753&q=80" class="lazybg" lazy></div>
                    <div data-src="https://images.unsplash.com/photo-1527437934671-61474b530017?w=753&q=80" class="lazybg" lazy></div>
                    <div data-src="https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=753&q=80" class="lazybg" lazy></div>
                    <script>
                        // duyệt tất cả tấm ảnh cần lazy-load
                        const lazyImages = document.querySelectorAll('[lazy]');
                    
                        // chờ các tấm ảnh này xuất hiện trên màn hình
                        const lazyImageObserver = new IntersectionObserver((entries, observer) => {
                          entries.forEach((entry) => {
                            // tấm ảnh này đã xuất hiện trên màn hình
                            if (entry.isIntersecting) {
                              const lazyImage = entry.target;
                              const src = lazyImage.dataset.src;
                    
                              lazyImage.tagName.toLowerCase() === 'img'
                                // <img>: copy data-src sang src
                                ? lazyImage.src = src
                    
                                // <div>: copy data-src sang background-image
                                : lazyImage.style.backgroundImage = "url(\'" + src + "\')";
                    
                              // copy xong rồi thì bỏ attribute lazy đi
                              lazyImage.removeAttribute('lazy');
                    
                              // job done, không cần observe nó nữa
                              observer.unobserve(lazyImage);
                            }
                          });
                        });
                    
                        // Observe từng tấm ảnh và chờ nó xuất hiện trên màn hình
                        lazyImages.forEach((lazyImage) => {
                          lazyImageObserver.observe(lazyImage);
                        });
                    </script>
                    <h4>IV. Demo lazyload sử dụng giải pháp native</h4>
                    <img src="https://images.unsplash.com/photo-1495954484750-af469f2f9be5?w=753&q=80" width="753" height="500" loading="lazy">
                    <img src="https://images.unsplash.com/photo-1587502536900-baf0c55a3f74?w=753&q=80" width="753" height="500" loading="lazy">
                    <img src="https://images.unsplash.com/photo-1510414842594-a61c69b5ae57?w=753&q=80" width="753" height="500" loading="lazy">
                    <img src="https://images.unsplash.com/photo-1471922694854-ff1b63b20054?w=753&q=80" width="753" height="500" loading="lazy">
                    <img src="https://images.unsplash.com/photo-1473186578172-c141e6798cf4?w=753&q=80" width="753" height="500" loading="lazy">
                    <img src="https://images.unsplash.com/photo-1487349384428-12b47aca925e?w=753&q=80" width="753" height="500" loading="lazy">
                    <img src="https://images.unsplash.com/photo-1527437934671-61474b530017?w=753&q=80" width="753" height="500" loading="lazy">
                    <img src="https://images.unsplash.com/photo-1473496169904-658ba7c44d8a?w=753&q=80" width="753" height="500" loading="lazy">
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="assets/js/data.js"></script>
    <script type="text/javascript" src="assets/js/intro.js"></script>
</body>

</html>